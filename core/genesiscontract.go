// Copyright 2018 The go-juchain Authors
// This file is part of the go-juchain library.
//
// The go-juchain library is free software: you can redistribute it and/or modify
// it under the terms of the GNU Lesser General Public License as published by
// the Free Software Foundation, either version 3 of the License, or
// (at your option) any later version.
//
// The go-juchain library is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
// GNU Lesser General Public License for more details.
//
// You should have received a copy of the GNU Lesser General Public License
// along with the go-juchain library. If not, see <http://www.gnu.org/licenses/>.

package core

import (
	"github.com/juchain/go-juchain/common"
)

// binary code generated from vm/solc/gen_dappmanager.solc
// format then from this site: https://www.json.cn/#
var DAPPContractABI =`
[
    {
        "constant":false,
        "inputs":[
            {"name":"dappName","type":"string"},
            {"name":"orgName","type":"string"},
            {"name":"orgDescription","type":"string"},
            {"name":"nationalityCode","type":"uint8"},
            {"name":"ledgerReplicated","type":"uint8"},
            {"name":"icon","type":"bytes32"},
            {"name":"ext0","type":"string"},
            {"name":"ext1","type":"string"},
            {"name":"ext2","type":"string"}
        ],
        "name":"registerDAppInfo",
        "outputs":[

        ],
        "payable":true,
        "stateMutability":"payable",
        "type":"function"
    },
    {
        "constant":false,
        "inputs":[
            {
                "name":"orgDescription",
                "type":"string"
            },
            {
                "name":"ledgerReplicated",
                "type":"uint8"
            },
            {
                "name":"icon",
                "type":"bytes32"
            }
        ],
        "name":"updateDAppInfo",
        "outputs":[

        ],
        "payable":true,
        "stateMutability":"payable",
        "type":"function"
    },
    {
        "constant":true,
        "inputs":[
            {
                "name":"dappId",
                "type":"address"
            }
        ],
        "name":"getDAppInfo",
        "outputs":[
            {
                "name":"dappAddress",
                "type":"address"
            },
            {
                "name":"dappName",
                "type":"string"
            },
            {
                "name":"orgName",
                "type":"string"
            },
            {
                "name":"orgDescription",
                "type":"string"
            },
            {
                "name":"nationalityCode",
                "type":"uint8"
            },
            {
                "name":"ledgerReplicated",
                "type":"uint8"
            },
            {
                "name":"state",
                "type":"uint8"
            },
            {
                "name":"lastActive",
                "type":"uint256"
            },
            {
                "name":"icon",
                "type":"bytes32"
            }
        ],
        "payable":false,
        "stateMutability":"view",
        "type":"function"
    },
    {
        "inputs":[

        ],
        "payable":false,
        "stateMutability":"nonpayable",
        "type":"constructor"
    },
    {
        "anonymous":false,
        "inputs":[

        ],
        "name":"UpdateDAppInfoAccepted",
        "type":"event"
    },
    {
        "anonymous":false,
        "inputs":[

        ],
        "name":"RegisterDAppInfoAccepted",
        "type":"event"
    }
]`
var DAPPContractBinCode = "608060405234801561001057600080fd5b50610a62806100206000396000f3006080604052600436106100565763ffffffff7c010000000000000000000000000000000000000000000000000000000060003504166364073385811461005b578063ce9925c3146101f8578063d98f356b1461024f575b600080fd5b6040805160206004803580820135601f81018490048402850184019095528484526101f694369492936024939284019190819084018382808284375050604080516020601f89358b018035918201839004830284018301909452808352979a99988101979196509182019450925082915084018382808284375050604080516020601f89358b018035918201839004830284018301909452808352979a99988101979196509182019450925082915084018382808284375050604080516020601f60608a01358b0180359182018390048302840183018552818452989b60ff8b3581169c848d01359091169b958601359a91995097506080909401955091935091820191819084018382808284375050604080516020601f89358b018035918201839004830284018301909452808352979a99988101979196509182019450925082915084018382808284375050604080516020601f89358b018035918201839004830284018301909452808352979a9998810197919650918201945092508291508401838280828437509497506103f89650505050505050565b005b6040805160206004803580820135601f81018490048402850184019095528484526101f69436949293602493928401919081908401838280828437509497505050833560ff1694505050602090910135905061065f565b34801561025b57600080fd5b50610270600160a060020a0360043516610726565b60408051600160a060020a038b16815260ff808816608083015286811660a0830152851660c082015260e08101849052610100810183905261012060208083018281528c51928401929092528b5192939192918401916060850191610140860191908e019080838360005b838110156102f35781810151838201526020016102db565b50505050905090810190601f1680156103205780820380516001836020036101000a031916815260200191505b5084810383528b5181528b516020918201918d019080838360005b8381101561035357818101518382015260200161033b565b50505050905090810190601f1680156103805780820380516001836020036101000a031916815260200191505b5084810382528a5181528a516020918201918c019080838360005b838110156103b357818101518382015260200161039b565b50505050905090810190601f1680156103e05780820380516001836020036101000a031916815260200191505b509c5050505050505050505050505060405180910390f35b600160a060020a0333166000908152602081905260409020600b015460ff161561042157600080fd5b885160001061042f57600080fd5b875160001061043d57600080fd5b865160001061044b57600080fd5b600060ff87161161045b57600080fd5b600060ff86161161046b57600080fd5b604080516101a08101825233600160a060020a0390811680835260208084018e81528486018e9052606085018d905260ff8c811660808701528b1660a086015260c085018a9052600160e0860181905261010086018a9052610120860189905261014086018890524261016087015261018086018190526000938452838352959092208451815473ffffffffffffffffffffffffffffffffffffffff19169416939093178355905180519394929361052a93850192919091019061099b565b506040820151805161054691600284019160209091019061099b565b506060820151805161056291600384019160209091019061099b565b50608082015160048201805460a085015160ff1991821660ff9485161761ff00191661010091851682021790925560c0850151600585015560e085015160068501805490921693169290921790915582015180516105ca91600784019160209091019061099b565b5061012082015180516105e791600884019160209091019061099b565b50610140820151805161060491600984019160209091019061099b565b50610160820151600a82015561018090910151600b909101805460ff19169115159190911790556040517f6142ff54c11c1eb59d0a251a917b38ccd85c84dc4c83c021e8662a73d557b00590600090a1505050505050505050565b600160a060020a0333166000908152602081905260408120600b015460ff16151560011461068c57600080fd5b835160001061069a57600080fd5b600060ff8416116106aa57600080fd5b50600160a060020a033316600090815260208181526040909120845190916106d991600384019187019061099b565b5060048101805461ff00191661010060ff861602179055600581018290556040517f3c22cfbecb928778078fb52ac2ece267e23d58f14308b86f1645e39aaad0197890600090a150505050565b600160a060020a0381166000908152602081905260408120600b01546060908190819084908190819081908190819060ff16151560011461076657600080fd5b600160a060020a038b161561077a57600080fd5b50600160a060020a038a811660009081526020818152604091829020805460048201546006830154600a8401546005850154600180870180548a51600261010094831615850260001901909216829004601f81018c90048c0282018c01909c528b8152989b97909716999098968b019760038c019760ff80891698949094048416969390931694939290918a918301828280156108585780601f1061082d57610100808354040283529160200191610858565b820191906000526020600020905b81548152906001019060200180831161083b57829003601f168201915b50508a5460408051602060026001851615610100026000190190941693909304601f8101849004840282018401909252818152959d508c9450925084019050828280156108e65780601f106108bb576101008083540402835291602001916108e6565b820191906000526020600020905b8154815290600101906020018083116108c957829003601f168201915b5050895460408051602060026001851615610100026000190190941693909304601f8101849004840282018401909252818152959c508b9450925084019050828280156109745780601f1061094957610100808354040283529160200191610974565b820191906000526020600020905b81548152906001019060200180831161095757829003601f168201915b50505050509550995099509950995099509950995099509950509193959799909294969850565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106109dc57805160ff1916838001178555610a09565b82800160010185558215610a09579182015b82811115610a095782518255916020019190600101906109ee565b50610a15929150610a19565b5090565b610a3391905b80821115610a155760008155600101610a1f565b905600a165627a7a72305820186f86651e4a9deaffcb6d8ffac43fb55fd2a49ce94ee193f20c8c2e5b491f6e0029";
var DAPPContractAddress common.Address;
var DPOSBallotABI = `
[
    {
        "constant":true,
        "inputs":[
            {
                "name":"nodeid",
                "type":"string"
            }
        ],
        "name":"delegatorInfo",
        "outputs":[
            {
                "name":"ip",
                "type":"string"
            },
            {
                "name":"port",
                "type":"uint256"
            },
            {
                "name":"ticket",
                "type":"uint256"
            }
        ],
        "payable":false,
        "stateMutability":"view",
        "type":"function"
    },
    {
        "constant":true,
        "inputs":[

        ],
        "name":"delegatorList",
        "outputs":[
            {
                "name":"result",
                "type":"string"
            }
        ],
        "payable":false,
        "stateMutability":"view",
        "type":"function"
    },
    {
        "constant":true,
        "inputs":[

        ],
        "name":"birusu",
        "outputs":[
            {
                "name":"",
                "type":"address"
            }
        ],
        "payable":false,
        "stateMutability":"view",
        "type":"function"
    },
    {
        "constant":false,
        "inputs":[
            {
                "name":"nodeid",
                "type":"string"
            },
            {
                "name":"ip",
                "type":"string"
            },
            {
                "name":"port",
                "type":"uint256"
            }
        ],
        "name":"register",
        "outputs":[

        ],
        "payable":true,
        "stateMutability":"payable",
        "type":"function"
    },
    {
        "constant":false,
        "inputs":[
            {
                "name":"nodeid",
                "type":"string"
            }
        ],
        "name":"vote",
        "outputs":[

        ],
        "payable":true,
        "stateMutability":"payable",
        "type":"function"
    },
    {
        "inputs":[

        ],
        "payable":false,
        "stateMutability":"nonpayable",
        "type":"constructor"
    },
    {
        "anonymous":false,
        "inputs":[

        ],
        "name":"NotifyRegistered",
        "type":"event"
    },
    {
        "anonymous":false,
        "inputs":[

        ],
        "name":"NotifyVoted",
        "type":"event"
    }
]`
var DPOSBallotBinCode = "608060405234801561001057600080fd5b5060008054600160a060020a033316600160a060020a0319909116179055610ecb8061003d6000396000f3006080604052600436106100775763ffffffff7c01000000000000000000000000000000000000000000000000000000006000350416631ab88d26811461007c57806361b29d691461015b578063b4701401146101e5578063e3f30a9e14610223578063e8a6055814610238578063fc36e15b146102c6575b600080fd5b34801561008857600080fd5b506040805160206004803580820135601f81018490048402850184019095528484526100d59436949293602493928401919081908401838280828437509497506103129650505050505050565b6040518080602001848152602001838152602001828103825285818151815260200191508051906020019080838360005b8381101561011e578181015183820152602001610106565b50505050905090810190601f16801561014b5780820380516001836020036101000a031916815260200191505b5094505050505060405180910390f35b34801561016757600080fd5b50610170610436565b6040805160208082528351818301528351919283929083019185019080838360005b838110156101aa578181015183820152602001610192565b50505050905090810190601f1680156101d75780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b3480156101f157600080fd5b506101fa610626565b6040805173ffffffffffffffffffffffffffffffffffffffff9092168252519081900360200190f35b34801561022f57600080fd5b50610170610642565b6040805160206004803580820135601f81018490048402850184019095528484526102c494369492936024939284019190819084018382808284375050604080516020601f89358b018035918201839004830284018301909452808352979a99988101979196509182019450925082915084018382808284375094975050933594506106fe9350505050565b005b6040805160206004803580820135601f81018490048402850184019095528484526102c49436949293602493928401919081908401838280828437509497506108be9650505050505050565b6060600080600080855111151561032857600080fd5b6002856040518082805190602001908083835b6020831061035a5780518252601f19909201916020918201910161033b565b518151600019602094850361010090810a820192831692199390931691909117909252949092019687526040805197889003820188206001818101546002808401548454601f94811615909a029097019098169790970490810184900484028a018401909252818952985088979496509194508692508301828280156104215780601f106103f657610100808354040283529160200191610421565b820191906000526020600020905b81548152906001019060200180831161040457829003601f168201915b50505050509250935093509350509193909250565b604080518082018252600181527f3a000000000000000000000000000000000000000000000000000000000000006020808301919091528251908101909252600080835260609290805b60015482101561061d57600260018381548110151561049b57fe5b9060005260206000200160405180828054600181600116156101000203166002900480156105005780601f106104de576101008083540402835291820191610500565b820191906000526020600020905b8154815290600101906020018083116104ec575b5050915050908152602001604051809103902090506000816002015411156106125761060f8360018481548110151561053557fe5b600091825260209182902001805460408051601f60026000196101006001871615020190941693909304928301859004850281018501909152818152928301828280156105c35780601f10610598576101008083540402835291602001916105c3565b820191906000526020600020905b8154815290600101906020018083116105a657829003601f168201915b5050505050866105d68560020154610a92565b60408051808201909152600181527f2c000000000000000000000000000000000000000000000000000000000000006020820152610b85565b92505b600190910190610480565b50909392505050565b60005473ffffffffffffffffffffffffffffffffffffffff1681565b73ffffffffffffffffffffffffffffffffffffffff331660009081526003602090815260409182902080548351601f6002600019610100600186161502019093169290920491820184900484028101840190945280845260609391928391908301828280156106f25780601f106106c7576101008083540402835291602001916106f2565b820191906000526020600020905b8154815290600101906020018083116106d557829003601f168201915b505050505091505b5090565b600080845111151561070f57600080fd5b825160001061071d57600080fd5b6000821161072a57600080fd5b6002846040518082805190602001908083835b6020831061075c5780518252601f19909201916020918201910161073d565b51815160209384036101000a60001901801990921691161790529201948552506040519384900301909220600181015490935015915061079d905057600080fd5b60606040519081016040528084815260200183815260200160008152506002856040518082805190602001908083835b602083106107ec5780518252601f1990920191602091820191016107cd565b51815160209384036101000a600019018019909216911617905292019485525060405193849003810190932084518051919461082d94508593500190610e0e565b506020828101516001808401919091556040909301516002909201919091558154808301808455600093909352865161088d927fb10e2d527612073b26eecdfd717e6a320cf44b4afac2b0732d9fcbe2b7fa0cf690920191880190610e0e565b50506040517f04d984cee80a7eb8c5c089d03e42a00635707031794faed8b59b04981fb54d3390600090a150505050565b60008060008084511115156108d257600080fd5b6002846040518082805190602001908083835b602083106109045780518252601f1990920191602091820191016108e5565b51815160209384036101000a6000190180199092169116179052920194855250604051938490030190922060018101549095506000109150610947905057600080fd5b73ffffffffffffffffffffffffffffffffffffffff3316600090815260036020526040902080549092506002600019610100600184161502019091160415156109a257835161099c9083906020870190610e0e565b50610a48565b6002826000016040518082805460018160011615610100020316600290048015610a035780601f106109e1576101008083540402835291820191610a03565b820191906000526020600020905b8154815290600101906020018083116109ef575b505092835250506040519081900360200190206002810154909150610a2f90600163ffffffff610de616565b60028201558351610a469083906020870190610e0e565b505b6002830154610a5e90600163ffffffff610df816565b60028401556040517f2ce65af352514e36b1f3ebf2bc34fc4bd6b4c21fab9c94a10792423f8965ec5790600090a150505050565b60606000808281851515610adb5760408051808201909152600181527f300000000000000000000000000000000000000000000000000000000000000060208201529450610b7c565b8593505b8315610af657600190920191600a84049350610adf565b826040519080825280601f01601f191660200182016040528015610b24578160200160208202803883390190505b5091505060001982015b8515610b7857815160001982019160f860020a6030600a8a060102918491908110610b5557fe5b906020010190600160f860020a031916908160001a905350600a86049550610b2e565b8194505b50505050919050565b6060806060806060806060806000808e98508d97508c96508b95508a94508451865188518a518c51010101016040519080825280601f01601f191660200182016040528015610bde578160200160208202803883390190505b50935083925060009150600090505b8851811015610c4b578881815181101515610c0457fe5b90602001015160f860020a900460f860020a028383806001019450815181101515610c2b57fe5b906020010190600160f860020a031916908160001a905350600101610bed565b5060005b8751811015610cad578781815181101515610c6657fe5b90602001015160f860020a900460f860020a028383806001019450815181101515610c8d57fe5b906020010190600160f860020a031916908160001a905350600101610c4f565b5060005b8651811015610d0f578681815181101515610cc857fe5b90602001015160f860020a900460f860020a028383806001019450815181101515610cef57fe5b906020010190600160f860020a031916908160001a905350600101610cb1565b5060005b8551811015610d71578581815181101515610d2a57fe5b90602001015160f860020a900460f860020a028383806001019450815181101515610d5157fe5b906020010190600160f860020a031916908160001a905350600101610d13565b5060005b8451811015610dd3578481815181101515610d8c57fe5b90602001015160f860020a900460f860020a028383806001019450815181101515610db357fe5b906020010190600160f860020a031916908160001a905350600101610d75565b50909d9c50505050505050505050505050565b600082821115610df257fe5b50900390565b600082820183811015610e0757fe5b9392505050565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10610e4f57805160ff1916838001178555610e7c565b82800160010185558215610e7c579182015b82811115610e7c578251825591602001919060010190610e61565b506106fa92610e9c9250905b808211156106fa5760008155600101610e88565b905600a165627a7a72305820b6a72c42dd702ea898d069bd9f4ed55b7bb7c46c9c8a2ef52b0871ac49db22e50029";
var DPOSBallotContractAddress common.Address;

// provide SDK api to handle this.
type DAppManager interface {
	registerDAppInfo(dappName string, orgName string, orgDescription string, nationalityCode uint8, ledgerReplicated uint8, icon[] byte, ext0 string, ext1 string, ext2 string)
	updateDAppInfo(orgDescription string, ledgerReplicated uint8, icon[] byte)
	getDAppInfo()
}

// provide SDK api to handle this.
type DPoSBallot interface {
	register(nodeid string, ip string, port uint);
	vote(nodeid string);
	delegatorList();
	delegatorInfo(nodeid string);
}

/**
	nonce := uint64(0);
	gasLimit := config.GenesisGasLimit;
	gasPrice := big.NewInt(300000);
	data := []byte(DAPPContractBinCode);
	types.NewTransaction(nonce, common.Address{}, big.NewInt(0), gasLimit, gasPrice, data)
 */
